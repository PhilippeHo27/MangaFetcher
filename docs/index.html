<!DOCTYPE html>
<html lang="en" data-theme="default" data-bg-theme="default">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manga Tracker</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>

    <main class="container">

        <section id="tracked-manga-section" class="card">
            <div class="tracked-manga-header">
                <h2>Tracked Manga</h2>
            </div>
            <div class="table-container">
                <table id="manga-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Latest Chapter Link</th>
                            <th>Source Page</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="manga-table-body">
                        <!-- Rows will be populated by JavaScript -->
                        <tr><td colspan="4">Loading manga data...</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section id="add-manga-section" class="card">
            <h2>Add New Manga</h2>
            <form id="add-manga-form">
                <div class="form-group">
                    <label for="manga-name">Manga Name:</label>
                    <input type="text" id="manga-name" name="manga-name" placeholder="e.g., One Piece" required>
                </div>
                <div class="form-group">
                    <label for="manga-url">Source URL:</label>
                    <input type="url" id="manga-url" name="manga-url" placeholder="e.g., https://mangadex.org/title/..." required>
                </div>
                <div class="form-group">
                    <label for="manga-selector">CSS Selector or XPath:</label>
                    <input type="text" id="manga-selector" name="manga-selector" placeholder="e.g., .latest-chapter a OR /html/body//div/a" required>
                </div>
                <div class="form-group selector-type">
                    <label>Selector Type:</label>
                    <div>
                        <input type="radio" id="selector-css" name="selector-type" value="css" checked>
                        <label for="selector-css">CSS</label>
                    </div>
                    <div>
                        <input type="radio" id="selector-xpath" name="selector-type" value="xpath">
                        <label for="selector-xpath">XPath</label>
                    </div>
                </div>
                <div class="form-group token-group">
                    <label for="github-token">GitHub Token:</label>
                    <input type="password" id="github-token" name="github-token"
                           placeholder="Generate at Profile > Settings > Developer settings > Personal access tokens (classic)"
                           required>
                    <span id="token-error-message" class="error-message" style="display: none;"></span>
                </div>
                <button type="submit" class="btn">Add Manga</button>
            </form>
            <p class="note">
                <strong>Instructions:</strong>
                <br>1. Name the manga.
                <br>2. Provide the URL for the site that hosts it.
                <br>3. Find where the link to the latest chapter appears on that page. Inspect the element (right-click > Inspect) and copy its CSS Selector or XPath.
            </p>
        </section>
    </main>

    <template id="manga-row-template">
        <tr>
            <td class="manga-title"></td>
            <td class="manga-source"><a></a></td>
            <td class="manga-chapters"></td>
            <td class="manga-status"></td>
            <td class="manga-actions">
                <button class="btn btn-small btn-mark-read">Mark Read</button>
                <button class="btn btn-small btn-clear" style="margin-left: 5px;">Clear Old</button>
            </td>
        </tr>
    </template>

    <footer>
        <p>Manga Tracker - Neo-Brutalist Style</p>
    </footer>

    <script src="js/app.js"></script>
</body>
</html>
